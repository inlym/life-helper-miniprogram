<view class="main">
  <!-- 天气实况（新版） - start -->
  <view class="condition wgb {{ main.skyClass.bgClass }}">
    <!-- 顶部预留高度 -->
    <topspace offset="0" opacity="0"></topspace>

    <!-- 大片背景区域 -->
    <view class="cond-background">
      <view class="fullmoon" wx:if="{{ main.skyClass.fullmoon }}"></view>
      <view class="halfmoon" wx:if="{{ main.skyClass.halfmoon }}"></view>
      <view class="sun" wx:if="{{ main.skyClass.sun }}"></view>
      <view class="fixed-cloud {{ main.skyClass.darkCloud ? 'darkcloud' : '' }}" wx:if="{{ main.skyClass.fixedCloud }}"> </view>
      <view class="moving-cloud {{ main.skyClass.darkCloud ? 'darkcloud' : '' }}" wx:if="{{ main.skyClass.movingCloud }}"></view>
      <view class="rain" wx:if="{{ main.skyClass.rain }}"></view>
    </view>

    <view class="content">
      <my-forauth scope="scope.userLocation" bindsuccess="addCity">
        <text class="address text-ellipsis-l1">{{ main.address }}</text>
        <text class="iconfont icon-xia"></text>
      </my-forauth>

      <view class="temperature">{{ main.now.temp }}</view>

      <view class="text">{{ main.now.text }}</view>
      <!-- <view class="summary">{{ main.now.summary }}</view> -->
    </view>
  </view>
  <!-- 天气实况（新版） - end -->

  <view class="f2d" wx:if="{{ f2d.length }}">
    <view class="item" wx:for="{{ f2d }}" wx:key="date" data-date="{{ item.date }}" hover-class="hover" bindtap="handleDayItemTap">
      <view class="line">
        <view>{{ item.dayText }}</view>
        <view>{{ item.text }}</view>
      </view>
      <view class="line">
        <view class="temp">{{ item.tempMax }}/{{ item.tempMin }}℃</view>
        <view class="aqi aqi-bg-{{ item.aqi.level }}">{{ item.aqi.category }}</view>
      </view>
    </view>
  </view>

  <!-- 未来 24 小时预报 - start -->
  <view class="container fore24hours">
    <view class="module-title">24小时预报</view>
    <scroll-view
      class="fore24scroll"
      scroll-x="{{ true }}"
      scroll-with-animation="{{ true }}"
      enable-flex="{{ true }}"
      scroll-anchoring="{{ true }}"
    >
      <view class="itemwrap">
        <view class="item" wx:for="{{ main.f24h }}" wx:key="time" hover-class="hover" bindtap="handleHourItemTap" data-index="{{ index }}">
          <view class="hour">{{ item.time }}</view>
          <image class="wea-icon" src="{{ item.iconUrl }}"></image>
          <view class="text">{{ item.text }}</view>
          <view class="temp degree">{{ item.temp }}</view>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- 未来 24 小时预报 - end -->

  <!-- 未来 2 小时降雨情况 - start -->
  <view class="container minutelyrain">
    <view class="module-title">2小时降雨</view>
    <div class="main">
      <view class="top flex-column" bindtap="handleMinutelyRainTopTap">
        <view class="summary">{{ main.rain.summary }}</view>
        <view class="desc">（更新时间 {{ main.rain.updateTime }}）</view>
      </view>
      <scroll-view scroll-x="{{ true }}" scroll-with-animation="{{ true }}" enable-flex="{{ true }}" scroll-anchoring="{{ true }}">
        <view class="itemwrap flex-row">
          <view class="item flex-column" wx:for="{{ main.rain.list }}" wx:key="time">
            <view class="num">{{ item.precip }}</view>
            <view class="rainblock" style="height: {{ item.height }}rpx;"></view>
            <view class="time">{{ item.time }}</view>
          </view>
        </view>
      </scroll-view>
      <view class="bottom onecenter">
        <view class="desc">未来 2 小时降雨量（单位：mm）</view>
      </view>
    </div>
  </view>

  <!-- 未来 2 小时降雨情况 - end -->

  <!-- 未来 15 天逐天天气预报 - start -->
  <view class="container f15d">
    <view class="module-title">15天预报</view>
    <view class="body">
      <view
        class="item flex-row"
        wx:for="{{ main.f15d }}"
        wx:key="date"
        hover-class="hover"
        data-date="{{ item.date }}"
        bindtap="handleDayItemTap"
      >
        <view class="weekday">{{ item.dayText }}</view>
        <view class="dateText">{{ item.dateText }}</view>
        <view class="text">{{ item.textDay }}</view>
        <image class="wea-icon" src="{{ item.iconDayUrl }}"></image>
        <view class="temp degree">{{ item.tempMax }}</view>
        <view class="sep"></view>
        <view class="temp degree">{{ item.tempMin }}</view>
        <image class="wea-icon" src="{{ item.iconNightUrl }}"></image>
        <view class="text">{{ item.textNight }}</view>
      </view>
    </view>
    <view class="more onecenter" hover-class="hover" bindtap="handleDayItemTap">
      <view>
        <text>未来 15 天预报详情</text>
        <mp-icon icon="arrow" size="{{ 10 }}"></mp-icon>
      </view>
    </view>
  </view>
  <!-- 未来 15 天逐天天气预报 - end -->

  <!-- 实时空气质量 - start -->
  <view class="container airnow">
    <view class="module-title">实时空气质量</view>
    <view class="body flex-row">
      <view class="left flex-column">
        <view class="content flex-column aqi-bg-{{ main.airnow.level }}">
          <view class="num">{{ main.airnow.aqi }}</view>
          <view class="text">{{ main.airnow.category }}</view>
        </view>
      </view>
      <view class="right">
        <!-- PM2.5 -->
        <view class="item flex-column">
          <view class="value"
            ><text class="num">{{ main.airnow.pm2p5 }} </text><text class="unit"> μg/m³</text></view
          >
          <progress
            percent="{{ (main.airnow.pm2p5 * 1) / 5 }}"
            activeColor="#333"
            border-radius="10"
            stroke-width="4"
            duration="1000"
          ></progress>
          <view class="name">PM2.5</view>
        </view>

        <!-- PM10 -->
        <view class="item flex-column">
          <view class="value"
            ><text class="num">{{ main.airnow.pm10 }} </text><text class="unit"> μg/m³</text></view
          >
          <progress
            percent="{{ (main.airnow.pm10 * 1) / 5 }}"
            activeColor="#333"
            border-radius="10"
            stroke-width="4"
            duration="1000"
          ></progress>
          <view class="name">PM10</view>
        </view>

        <!-- O3 -->
        <view class="item flex-column">
          <view class="value"
            ><text class="num">{{ main.airnow.pm2p5 }} </text><text class="unit"> μg/m³</text></view
          >
          <progress
            percent="{{ (main.airnow.pm2p5 * 1) / 5 }}"
            activeColor="#333"
            border-radius="10"
            stroke-width="4"
            duration="1000"
          ></progress>
          <view class="name">O<text class="sub">3</text></view>
        </view>

        <!-- CO -->
        <view class="item flex-column">
          <view class="value"
            ><text class="num">{{ main.airnow.o3 }} </text><text class="unit"> mg/m³</text></view
          >
          <progress
            percent="{{ (main.airnow.o3 * 1) / 5 }}"
            activeColor="#333"
            border-radius="10"
            stroke-width="4"
            duration="1000"
          ></progress>
          <view class="name">CO</view>
        </view>

        <!-- SO2 -->
        <view class="item flex-column">
          <view class="value"
            ><text class="num">{{ main.airnow.so2 }} </text><text class="unit"> μg/m³</text></view
          >
          <progress
            percent="{{ (main.airnow.so2 * 1) / 5 }}"
            activeColor="#333"
            border-radius="10"
            stroke-width="4"
            duration="1000"
          ></progress>
          <view class="name">SO<text class="sub">2</text></view>
        </view>

        <!-- NO2 -->
        <view class="item flex-column">
          <view class="value"
            ><text class="num">{{ main.airnow.no2 }} </text><text class="unit"> μg/m³</text></view
          >
          <progress
            percent="{{ (main.airnow.no2 * 1) / 5 }}"
            activeColor="#333"
            border-radius="10"
            stroke-width="4"
            duration="1000"
          ></progress>
          <view class="name">NO<text class="sub">2</text></view>
        </view>
      </view>
    </view>
  </view>
  <!-- 实时空气质量 - end -->

  <!-- 生活指数 - start -->
  <view class="container liveindex">
    <view class="module-title">今日生活指数</view>
    <view class="body">
      <view
        class="item"
        wx:for="{{ main.liveIndex }}"
        wx:key="type"
        data-index="{{ index }}"
        bindtap="showLiveIndexDetail"
        hover-class="hover"
      >
        <image src="{{ item.iconUrl }}" mode="widthFix"></image>
        <view class="status">{{ item.category }}</view>
        <view class="name">{{ item.name }}</view>
      </view>
    </view>
  </view>
  <!-- 生活指数 - end -->
</view>

<!--以下为非页面元素-->

<!--Toptips顶部错误提示组件-->
<mp-toptips type="{{ toptips.type }}" show="{{ toptips.show }}" msg="{{ toptips.msg }}" delay="{{ toptips.delay }}"> </mp-toptips>

<!-- 半屏弹窗组件 -->
<mp-half-screen-dialog
  bindbuttontap="buttontap"
  show="{{ halfScreen.show }}"
  title="{{ halfScreen.title }}"
  subTitle="{{ halfScreen.subTitle }}"
  desc="{{ halfScreen.desc }}"
  tips="{{ halfScreen.tips }}"
>
</mp-half-screen-dialog>
