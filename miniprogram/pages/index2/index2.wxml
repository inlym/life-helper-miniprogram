<view class="page" data-weui-theme="{{ theme }}">
    <!-- 实时天气模块 -->
    <view
        class="weather-now weather-{{ clock }} weather-{{ clock }}--{{ now.type }}"
        style="padding-top: {{ reservedHeight }}px;"
    >
        <!-- 和胶囊按钮垂直对齐的位置条 -->
        <view class="location-bar">
            <!-- 左侧加号 -->
            <mp-icon class="add-icon" icon="add" size="24" color="{{ iconColor }}"></mp-icon>

            <!-- 右侧地名和更新时间 -->
            <view class="content">
                <!-- 第一行：地名+定位图标 -->
                <view class="location">
                    <share-element class="location-name">{{ locationName }}</share-element>
                    <mp-icon class="location-icon" icon="location" size="20" color="{{ iconColor }}"></mp-icon>
                </view>
                <!-- 第二行：更新时间 -->
                <view class="update-text">{{ now.updateMinutesDiff }}分钟前更新</view>
            </view>
        </view>

        <!-- 详情天气信息：天气 icon、温度、天气文本描述 -->
        <view class="weather-detail">
            <image src="{{ now.iconUrl }}" mode="widthFix" class="weather-icon"></image>
            <view class="temp">{{ now.temp }}</view>
            <view class="right">
                <view class="degree" style="border-color: {{ iconColor }};"></view>
                <view class="text">{{ now.text }}</view>
            </view>
        </view>

        <!-- 空气质量 -->
        <view class="aqi">
            <view class="content aqi-level--{{ airNow.level }}">AQI {{ airNow.aqi }} {{ airNow.category }}</view>
        </view>

        <!-- 其他信息 -->
        <view class="other">
            <view class="list">
                <view class="item">
                    <view class="value">{{ now.windScale }}级</view>
                    <view class="name">{{ now.windDir }}</view>
                </view>
                <view class="item">
                    <view class="value">{{ now.humidity }}%</view>
                    <view class="name">相对湿度</view>
                </view>
                <view class="item">
                    <view class="value">{{ now.vis }}km</view>
                    <view class="name">能见度</view>
                </view>
                <view class="item">
                    <view class="value">{{ now.precip }}mm</view>
                    <view class="name">降水量</view>
                </view>
            </view>
        </view>
    </view>

    <!-- 今明两天预报 -->
    <view class="forecast-2days">
        <view class="item" hover-class="hover">
            <view class="line">
                <view class="weekday">{{ f2d[0].weekday }}</view>
                <view class="text">{{ f2d[0].text }}</view>
            </view>
            <view class="line">
                <view class="temp">{{ f2d[0].tempMax }}/{{ f2d[0].tempMin }}℃</view>
                <view class="aqi aqi-level--{{ f2d[0].aqiLevel }}">{{ f2d[0].aqiCategory }}</view>
            </view>
        </view>
        <view class="item" hover-class="hover">
            <view class="line">
                <view class="weekday">{{ f2d[1].weekday }}</view>
                <view class="text">{{ f2d[1].text }}</view>
            </view>
            <view class="line">
                <view class="temp">{{ f2d[1].tempMax }}/{{ f2d[1].tempMin }}℃</view>
                <view class="aqi aqi-level--{{ f2d[1].aqiLevel }}">{{ f2d[1].aqiCategory }}</view>
            </view>
        </view>
    </view>

    <!-- 24小时预报 -->
    <view class="weather-hourly">
        <view class="title">24小时预报</view>
        <view class="content">
            <scroll-view
                class="scroll"
                scroll-x="{{ true }}"
                scroll-with-animation="{{ true }}"
                enable-flex="{{ true }}"
                scroll-anchoring="{{ true }}"
                enhanced="{{ true }}"
                fast-deceleration="{{ true }}"
            >
                <view class="list">
                    <view class="item" wx:for="{{ f24h }}" wx:key="time">
                        <view class="time-text">{{ item.timeText }}</view>
                        <image class="icon" src="{{ item.iconUrl }}" mode="widthFix"></image>
                        <view class="text">{{ item.text }}</view>
                        <view class="temp">{{ item.temp }}°</view>
                    </view>
                </view>
            </scroll-view>
        </view>
    </view>
</view>
